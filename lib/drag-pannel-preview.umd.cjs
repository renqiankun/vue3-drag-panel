(function(){"use strict";try{if(typeof document<"u"){var a=document.createElement("style");a.appendChild(document.createTextNode(".group-wrap[data-v-efe5d5a7]{position:absolute;left:0;top:0;width:100%;height:100%}.group-wrap .group-item[data-v-efe5d5a7]{position:absolute}.custom-image[data-v-51bcdfe3]{color:var(--35be3580);background-color:var(--7a3808fb);padding:var(--565e2eee);border-radius:var(--ca4fabd6)}.shap-wrap[data-v-7cddd7a5]{word-break:break-all;box-sizing:border-box;height:100%;color:var(--61fa260c);background-color:var(--55a66c16);padding:var(--9d5a2030);border-radius:var(--2a2a61db);font-size:var(--60be67f9);border:var(--71bc76ee)}.text-wrap[data-v-8f822377]{color:var(--47b5a944);background-color:var(--27bcc882);padding:var(--6f707c9c);border-radius:var(--7061a25e);font-size:var(--2863cf6f);border:var(--7aff53b8);word-break:break-all;white-space:var(--3b2782fa);overflow:var(--514c5593);text-overflow:var(--71345cf5);text-align:var(--70e03432);width:100%;height:100%;box-sizing:border-box}.icon-wrap[data-v-6b52c610]{color:var(--46bf371c);stroke:var(--46bf371c);fill:var(--5a1a592f);background-color:var(--1d6b7926);padding:var(--651f2d40);border-radius:var(--5f884d3a);font-size:var(--6f5fc4fe)}.icon-wrap.color-self[data-v-6b52c610] *{color:var(--46bf371c);stroke:var(--46bf371c);fill:var(--5a1a592f)}.img-scale-wrap[data-v-c83ce927]{position:relative;width:100%;height:100%;color:var(--806595a2);background-color:var(--86f44e2c);padding:var(--cea80246);border-radius:var(--52a92046)}.img-scale-wrap .img-scale-reduce[data-v-c83ce927]{position:absolute;overflow:hidden;width:100%;height:100%;transition:.1s}.img-scale-wrap .img-scale[data-v-c83ce927]{display:block;position:absolute;width:100%;height:100%;-webkit-user-drag:none}.drag-editor-preivew-wrap[data-v-450a4fac]{width:100%;height:100%;min-width:200px;min-height:200px}.drag-editor-preivew[data-v-450a4fac]{width:100%;height:100%}.drag-editor-preivew[data-v-450a4fac] .handle{display:none!important}.preview-item-wrap[data-v-450a4fac]{touch-action:none;position:absolute;box-sizing:border-box;-webkit-user-select:none;user-select:none}.preview-item-wrap img[data-v-450a4fac]{-webkit-user-drag:none}.dycomponent-class[data-v-450a4fac]{pointer-events:none}.dycomponent-class[hide][data-v-450a4fac]{display:none}")),document.head.appendChild(a)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
(function(e,y){typeof exports=="object"&&typeof module<"u"?module.exports=y(require("vue")):typeof define=="function"&&define.amd?define(["vue"],y):(e=typeof globalThis<"u"?globalThis:e||self,e["drag-pannel-preview"]=y(e.Vue))})(this,function(e){"use strict";const y=Object.freeze(Object.defineProperty({__proto__:null,get default(){return w}},Symbol.toStringTag,{value:"Module"})),k=(c,t)=>{let l=c.self,o=l.activeValue,a=l.prop,d=l.activeMode,g=l.activeMap;if(!a||!d||!g)return l;let n=!1;switch(d){case"大于":t[a]>o&&(n=!0);break;case"小于":t[a]<o&&(n=!0);break;case"等于":t[a]==o&&(n=!0);break;case"不等于":t[a]!=o&&(n=!0);break;case"大于等于":t[a]>=o&&(n=!0);break;case"小于等于":t[a]<o&&(n=!0);break;case"存在":t[a]!==void 0&&t[a]!==null&&(n=!0);break;case"不存在":(t[a]===void 0||t[a]===null)&&(n=!0);break}let i={};return n&&(i=S(g,t)),{...l,...i}},S=(c,t)=>{var d,g;let l={},o=/\$\{(.*?)\}.*/g;try{l=JSON.parse(c);for(var a in l){let n=l[a];if(o.test(n)){let i=/\$\{(.*?)\}/g,s=((d=n.match(i))==null?void 0:d[0])??"",_=n.split(s),h=s.replace(/[\$|{|}]/g,""),r=(t==null?void 0:t[h])??"";l[a]=(g=_.join)==null?void 0:g.call(_,r)}}}catch(n){console.error("解析 activeMap 失败",n)}return l},x={class:"group-wrap"},B=["a"],$=e.defineComponent({__name:"index",props:{data:{},modelValue:{default:()=>({})},groupModel:{default:()=>({})},disabled:{type:Boolean}},setup(c){const t=c,l=d=>C(d).default,o=d=>({width:d.w=="auto"?d.w:d.w+"px",height:d.h=="auto"?d.h:d.h+"px",transform:`translate(${d.x}px, ${d.y}px) rotate(${d.r||0}deg)`}),a=d=>k(d,t.groupModel);return(d,g)=>(e.openBlock(),e.createElementBlock("div",x,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.data.group,n=>(e.openBlock(),e.createElementBlock("div",{a:n.active,class:"group-item",style:e.normalizeStyle(o(n))},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l(n.self.name)),e.mergeProps({data:n,h:n.h,w:n.w},a(n),{modelValue:d.groupModel[n.self.modelValue],"onUpdate:modelValue":i=>d.groupModel[n.self.modelValue]=i,defaultModelValue:n.self.defaultModelValue,"onUpdate:defaultModelValue":i=>n.self.defaultModelValue=i,disabled:!0}),null,16,["data","h","w","modelValue","onUpdate:modelValue","defaultModelValue","onUpdate:defaultModelValue"]))],12,B))),256))]))}}),J="",b=(c,t)=>{const l=c.__vccOpts||c;for(const[o,a]of t)l[o]=a;return l},z=Object.freeze(Object.defineProperty({__proto__:null,default:b($,[["__scopeId","data-v-efe5d5a7"]])},Symbol.toStringTag,{value:"Module"})),v=["width","height","src"],O=e.defineComponent({__name:"index",props:{url:{},w:{},h:{},color:{default:""},bgColor:{default:""},padding:{default:""},radius:{default:""}},setup(c){const t=c;e.useCssVars(o=>({"35be3580":o.color,"7a3808fb":o.bgColor,"565e2eee":o.padding,ca4fabd6:o.radius})),e.watch(()=>[t.w,t.h],()=>l()),e.onMounted(()=>{l()});const l=()=>{};return(o,a)=>(e.openBlock(),e.createElementBlock("img",{class:"custom-image",width:o.w,height:o.h,src:o.url,alt:""},null,8,v))}}),Q="",E=Object.freeze(Object.defineProperty({__proto__:null,default:b(O,[["__scopeId","data-v-51bcdfe3"]])},Symbol.toStringTag,{value:"Module"})),j=Object.freeze(Object.defineProperty({__proto__:null,default:e.defineComponent({__name:"index",props:{url:{},w:{},h:{},flip:{}},setup(c){const t=c;let l=e.ref(),o="",a=!0,d="";e.watch(()=>[t.w,t.h],()=>g()),e.watch(()=>{var i,s;return[(i=t.flip)==null?void 0:i.horizontal,(s=t.flip)==null?void 0:s.vertical]},()=>n()),e.onMounted(()=>{o=l.value.getContext("2d"),g()});const g=()=>{let i=t.w,s=t.h;l.value.width=i,l.value.height=s,a?(a=!1,d=document.createElement("img"),d.src=t.url,d.onload=()=>{o.drawImage(d,0,0,i,s),n()}):n()},n=()=>{const{vertical:i,horizontal:s}=t.flip??{};let _=t.w,h=t.h;const r=s?-1:1,f=i?-1:1;o.clearRect(0,0,_,h),o.translate(_/2-_*r/2,h/2-h*f/2),o.scale(r,f),o.drawImage(d,0,0,_,h),o.setTransform(1,0,0,1,0,0)};return(i,s)=>(e.openBlock(),e.createElementBlock("canvas",{ref_key:"canvas",ref:l},null,512))}})},Symbol.toStringTag,{value:"Module"})),T={class:"shap-wrap"},I=e.defineComponent({__name:"index",props:{modelValue:{default:""},defaultModelValue:{default:""},data:{},color:{default:""},bgColor:{default:""},padding:{default:""},radius:{default:""},fontSize:{default:""},borderColor:{default:""},w:{},h:{}},setup(c){return e.useCssVars(t=>({"61fa260c":t.color,"55a66c16":t.bgColor,"9d5a2030":t.padding,"2a2a61db":t.radius,"60be67f9":t.fontSize,"71bc76ee":t.borderColor})),(t,l)=>(e.openBlock(),e.createElementBlock("div",T))}}),te="",P=Object.freeze(Object.defineProperty({__proto__:null,default:b(I,[["__scopeId","data-v-7cddd7a5"]])},Symbol.toStringTag,{value:"Module"})),H=["contenteditable"],R=e.defineComponent({__name:"index",props:{modelValue:{default:""},defaultModelValue:{},data:{},color:{default:""},bgColor:{default:""},padding:{default:""},radius:{default:""},fontSize:{default:""},borderColor:{default:""},align:{},w:{},h:{},noWordWrap:{type:Boolean,default:!1},overEllipsis:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hasModelValue:{type:Boolean}},emits:["update:modelValue","update:defaultModelValue","click"],setup(c,{emit:t}){const l=c;e.useCssVars(s=>({"47b5a944":s.color,"27bcc882":s.bgColor,"6f707c9c":s.padding,"7061a25e":s.radius,"2863cf6f":s.fontSize,"7aff53b8":s.borderColor,"3b2782fa":s.noWordWrap?"nowrap":"","514c5593":s.overEllipsis?"hidden":"visible","71345cf5":s.overEllipsis?"ellipsis":"unset","70e03432":s.align?s.align:"left"}));let o=e.ref(!1),a=e.ref();const d=async()=>{l.disabled||(o.value=!0,g(a.value),await e.nextTick(),a.value.focus())},g=s=>{const _=window.getSelection(),h=document.createRange();h.selectNodeContents(s),_.removeAllRanges(),_.addRange(h)},n=()=>{o.value=!1},i=s=>{l.hasModelValue&&t("update:modelValue",s.target.innerText),t("update:defaultModelValue",s.target.innerText)};return(s,_)=>(e.openBlock(),e.createElementBlock("div",{contenteditable:e.unref(o),onBlur:n,onInput:i,ref_key:"text",ref:a,class:e.normalizeClass({"text-wrap":!0,"can-edit":e.unref(o)}),onDblclick:d},e.toDisplayString(s.modelValue||s.defaultModelValue),43,H))}}),oe="",U=Object.freeze(Object.defineProperty({__proto__:null,default:b(R,[["__scopeId","data-v-8f822377"]])},Symbol.toStringTag,{value:"Module"})),W=["innerHTML"],A=e.defineComponent({__name:"index",props:{url:{},color:{default:""},bgColor:{default:""},fillColor:{default:""},padding:{default:""},radius:{default:""},fontSize:{default:""},iconUseSelfColor:{type:Boolean}},setup(c){return e.useCssVars(t=>({"46bf371c":t.color,"5a1a592f":t.fillColor,"1d6b7926":t.bgColor,"651f2d40":t.padding,"5f884d3a":t.radius,"6f5fc4fe":t.fontSize})),(t,l)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass({"icon-wrap":!0,"color-self":t.iconUseSelfColor}),innerHTML:t.url},null,10,W))}}),ne="",D=Object.freeze(Object.defineProperty({__proto__:null,default:b(A,[["__scopeId","data-v-6b52c610"]])},Symbol.toStringTag,{value:"Module"})),N={class:"img-scale-wrap"},F=["src"],L=e.defineComponent({__name:"index",props:{url:{},w:{},h:{},color:{default:""},bgColor:{default:""},padding:{default:""},radius:{default:""},lockAspectRatio:{type:Boolean,default:!1},position:{default:"left"},imgWidth:{},imgHeight:{}},setup(c){const t=c;e.useCssVars(a=>({"806595a2":a.color,"86f44e2c":a.bgColor,cea80246:a.padding,"52a92046":a.radius}));let l=e.computed(()=>({[t.position]:0,width:t.imgWidth,height:t.imgHeight})),o=e.computed(()=>({[t.position]:0,width:t.lockAspectRatio?t.w+"px":void 0,height:t.lockAspectRatio?t.h+"px":void 0}));return(a,d)=>(e.openBlock(),e.createElementBlock("div",N,[e.createElementVNode("div",{class:"img-scale-reduce",style:e.normalizeStyle(e.unref(l))},[e.createElementVNode("img",{class:"img-scale",src:a.url,alt:"",style:e.normalizeStyle(e.unref(o))},null,12,F)],4)]))}}),de="";let X=Object.assign({"./Group/index.vue":z,"./Image/index.vue":E,"./Picture/index.vue":j,"./Shape/index.vue":P,"./Text/index.vue":U,"./icon-svg/index.vue":D,"./img-scale/index.vue":Object.freeze(Object.defineProperty({__proto__:null,default:b(L,[["__scopeId","data-v-c83ce927"]])},Symbol.toStringTag,{value:"Module"})),"./preview/index.vue":y});const C=c=>X[`./${c}/index.vue`],Y=["onClick","onDblclick"],q=e.defineComponent({name:"dragPannelPreview"}),G=e.defineComponent({...q,props:{pannel:{},modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1},parentWidth:{default:0}},emits:["click","dblclick"],setup(c,{emit:t}){const l=c;let o=e.ref(),a=e.ref({});e.onMounted(()=>{g()});const d=r=>({width:r.w==="auto"?r.w:r.w+"px",height:r.h==="auto"?r.h:r.h+"px",fontSize:l.pannel.fontSize||r.fontSize,zIndex:r.z||"auto",transform:`translate(${r.x||0}px, ${r.y||0}px) rotate(${r.r||0}deg)`}),g=async()=>{await e.nextTick();let r={transformOrigin:"0% 0%",width:l.pannel.width+"px",height:l.pannel.height+"px",color:l.pannel.color,fontSize:l.pannel.fontSize,backgroundColor:l.pannel.bgColor},f=o.value.getBoundingClientRect(),{endRate:p,translateX:m,translateY:u}=n(f.width,f.height);a.value={...r,transform:`translate(${m}px, ${u}px) scale(${p})`}},n=(r,f)=>{let p=r/l.pannel.width,m=f/l.pannel.height,u=p>m?m:p,M=p<=m?0:r*u,V=m<=p?0:f*u;return{endRate:u,translateX:M>0?r/2-l.pannel.width/2*u:M,translateY:V>0?f/2-l.pannel.height/2*u:V}},i=r=>C(r).default,s=(r,f)=>{f.self.click&&t("click",{event:r,item:f})},_=(r,f)=>{f.self.click&&t("dblclick",{event:r,item:f})},h=r=>k(r,l.modelValue);return(r,f)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"wrapRef",ref:o,class:"drag-editor-preivew-wrap"},[e.createElementVNode("div",{class:e.normalizeClass({"drag-editor-preivew":!0}),style:e.normalizeStyle(e.unref(a))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.pannel.components,p=>{var m;return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass({"preview-item-wrap":!0,"click-able":p.self.click}),style:e.normalizeStyle(d(p)),onClick:e.withModifiers(u=>s(u,p),["self"]),onDblclick:e.withModifiers(u=>_(u,p),["self"])},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(i(p.self.name)),e.mergeProps({class:{"dycomponent-class":!0},data:p,h:p.h,w:p.w},h(p),{modelValue:r.modelValue[p.self.modelValue],"onUpdate:modelValue":u=>r.modelValue[p.self.modelValue]=u,defaultModelValue:p.self.defaultModelValue,"onUpdate:defaultModelValue":u=>p.self.defaultModelValue=u,groupModel:r.modelValue,disabled:!0,id:((m=p.self)==null?void 0:m.id)||""}),null,16,["data","h","w","modelValue","onUpdate:modelValue","defaultModelValue","onUpdate:defaultModelValue","groupModel","id"]))],46,Y)}),256))],4)],512))}}),ie="",w=b(G,[["__scopeId","data-v-450a4fac"]]);return w.install=c=>{c.component(w.name,w)},w});
